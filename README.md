# Описание
(Проект находится на стадии доработки)  
Это REST api реализующее каталог автомобилей с использованием базы данных Postgres.  
Данный проект является тестовым заданием для компании [Effective Mobile](https://effective-mobile.ru/)
# В данном api реализовано:
1) Создание структуры базы данных(postgres) при запуске api путем миграции.  
Миграция реализована с помощью пакета [golang-migrate](https://github.com/golang-migrate/migrate)  
Драйвер для работы с postgres [pgx](https://github.com/jackc/pgx)
2) Логирование уровнем info  
Реализовано с помощью пакета [logrus](github.com/sirupsen/logrus)
3) Маршрутизация запросов  
Реализовано с помощью  [gorilla/mux](https://github.com/gorilla/mux)
5) Чтение конфигурации api из config.env  
Работа с env файлами реализована с помощью пакета [joho/godotenv](https://github.com/joho/godotenv)
6) Добавление записей новый автомобилей путем обращения к сторонему api
7) Выдача существующих данных с пагинацией
8) Фильтрация данных по марке автомобиля, модели автомобиля и году выпуска
9) Удаление записи по идентификатору
10) Обновление записи по идентификатору
# На данный момент нереализовано, но появится:
1) Фильтрация по всем оставшимся полям
2) Сортировка по полям
3) Swagger файл
4) Покрытие кода другими уровнями логов
# Rest методы
## GET
* url/catalog 
Выдача 10 строк данных каталога и индекса объекта последней строке (для пагинации)  в формате JSON 
* url/catalog/[brand id]  
Выдача 10 строк данных каталога и индекса объекта последней строке (для пагинации)  в формате JSON с фильтрацией по марке автомобилей
* url/catalog/[brand id]/[model id]  
Выдача 10 строк данных каталога и индекса объекта последней строке (для пагинации)  в формате JSON с фильтрацией по марке и модели автомобилей
* url/catalog/...?p=[id]  
p параметр для выдачи следующих 10 строк данных каталога
* url/catalog/...?year=[]  
year параметр фильтрации данных по году выпуска автомобилей
* url/brand
Выдача всех марок автомобилей предоставленных в данном каталоге
* url/brand/[id brand]
Выдача моделей автомобилей определенной марки
## POST
* url/catalog
В теле запроса ожидается json в формате
![image](https://github.com/Sereys13/api_catalog_car/assets/134072150/175c31db-008f-4e25-a46f-1564eb556e89)
Добавление записи в каталог путем обращения к сторонему api
## DELETE
* url/catalog/[id]
Удаление записи в каталоге по идентификатору
## PUT
* url/catalog/regnum/[id:[0-9]+]
Обновление поля regnum по идентификатору объекта
В теле запроса ожидается JSON файл с одной парой ключ-значение
* url/catalog/brand/[id:[0-9]+]
* url/catalog/model/[id:[0-9]+]
Обновление полей brand/model по идентификатору объекта  
В теле запроса ожидается JSON файл с двумя парами ключ-значение
* url/catalog/year/[id:[0-9]+]
Обновление полям year по идентификатору объекта  
В теле запроса ожидается JSON файл с одной парой ключ-значение
* url/catalog/holder/[id:[0-9]+]
Обновления поля holder по идентификатору объекта
В теле запроса ожидается JSON файл с 2/3 парами ключ-значение
